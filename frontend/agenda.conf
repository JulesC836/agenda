server {
    listen 80;
    
    # Root du frontend
    root /usr/share/nginx/html/browser;
    index index.html;
    
    # 1. Configuration pour servir le frontend
    location / {
        try_files $uri $uri/ /index.html;
    }

    # 2. Configuration du reverse proxy pour l'API
    # Le chemin /api est géré par l'Ingress, mais une configuration Nginx dans le Pod pourrait être nécessaire
    # pour le développement ou si l'Ingress ne gère pas la réécriture d'URL.
    # Pour Kubernetes/Ingress, cette section est souvent inutile dans le Nginx du Pod, 
    # mais je la laisse si vous en avez besoin pour le développement local.
    location /api/ {
        # Remplacez par le nom du service K8s si vous n'utilisez pas l'Ingress en développement
        # proxy_pass http://backend-service:8000; 
        # proxy_set_header Host $host;
        # proxy_set_header X-Real-IP $remote_addr;
    }
}
